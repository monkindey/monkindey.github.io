<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>三角形</title>
  <link rel="stylesheet" href="./shared/index.css">
  <style>
    .triangle {
      margin-top: 20px;
    }

    #code {
      font-size: 12px;
      background-color: #f9f9f9;
      width: 500px;
      padding: 20px;
    }

    #triangle {
      height: 0;
      width: 0;
      border-width: 10px;
      border-style: solid;
      border-top-color: transparent;
      border-bottom-color: #ccc;
      border-left-color: transparent;
      border-right-color: transparent;
    }
  </style>
</head>
<body>
  <main>
    <h3>配置</h3>

    <div>
      <p>
        <label>
          方向：
          <select id="direction">
            <option value="left">left</option>
            <option value="right">right</option>
            <option value="top">top</option>
            <option value="bottom" selected="selected">bottom</option>
          </select>
        </label>
      </p>
       
      <p>
        <label>
          颜色：
          <input value="#cccccc" id="color" type="color" />
        </label>
      </p>
    </div>

    <h3>展示</h3>

    <div class="triangle" id="triangle"></div>
    
    <h3>代码</h3>

    <pre id="code">
    
    #triangle {
      height: 0;
      width: 0;
      border-width: 10px;
      border-style: solid;
      border-top-color: transparent;
      border-bottom-color: #ccc;
      border-left-color: transparent;
      border-right-color: transparent;
    }  
    </pre>
  </main>
</body>
<script>
  const byId = (id) => document.getElementById(id);
  const triangle = byId('triangle');
  const directions = ['Left', 'Right', 'Top', 'Bottom'];
  const directionElement = byId('direction');
  const colorElement = byId('color');
  const codeElement = byId('code');

  const capitalize = (str) => {
    return `${str.slice(0, 1).toUpperCase()}${str.slice(1)}`;
  }

  const getCode = () => {
    return `
    #triangle {
      height: 0;
      width: 0;
      border-width: 10px;
      border-style: solid;
      border-top-color: ${triangle.style.borderTopColor};
      border-bottom-color: ${triangle.style.borderBottomColor};
      border-left-color: ${triangle.style.borderLeftColor};
      border-right-color: ${triangle.style.borderRightColor};
    }   
    `
  }

  directionElement.addEventListener('change', (e) => {
    directions.forEach((d) => {
      if (d.toLowerCase() === e.target.value) {
        triangle.style[`border${d}Color`] = colorElement.value
      } else {
        triangle.style[`border${d}Color`] = 'transparent'
      }
    })

    codeElement.innerHTML = getCode()
  });

  colorElement.addEventListener('change', (e) => {
    triangle.style[`border${capitalize(directionElement.value)}Color`] = e.target.value
    codeElement.innerHTML = getCode()
  });
</script>
</html>